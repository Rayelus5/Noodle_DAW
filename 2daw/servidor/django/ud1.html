<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UD1 — Introducción a Django (corregido)</title>

  <style>
    /* Tipografía general */
    * {
        font-family: "Courier New", Courier, monospace;
        line-height: 1.5;
    }

    body {
      background: #1f1f1f;
      color: #e6e6e6;
      margin:0;
      padding:24px;
    }

    .container {
      max-width:1000px;
      margin:0 auto;
      background: #171717;
      padding:22px;
      border-radius:10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.6);
      border: 1px solid #2b2b2b;
    }

    /* Estilos de títulos */
    h1, h2, h3, h4 {
        font-weight: bold;
        margin-top: 25px;
        margin-bottom: 10px;
    }

    h1 {
        font-size: 32px;
        border-left: 20px solid rgb(25, 75, 50);
        border-bottom: 20px solid rgb(25, 75, 50);
        padding-bottom: 8px;
        padding-left: 25px;
        color: #e8f5ea;
    }

    h2 {
        font-size: 26px !important;
        padding: 20px;
        margin-top: 45px !important;
        margin-bottom: 10px !important;
        border-left: 12px solid rgb(54, 115, 85);
        border-top: 5px solid rgb(54, 115, 85);
        background: rgb(25, 75, 50);
        color: #eaf8ee;
    }

    h3 {
        font-size: 18px !important;
        padding: 10px;
        margin-top: 20px !important;
        margin-bottom: 6px !important;
        border-left: 24px solid rgb(54, 108, 115);
        background: rgb(25, 49, 75);
        color: #e2eef6;
        text-align:left;
    }

    h4 {
        font-size: 14px !important;
        padding: 10px;
        margin-top: 30px !important;
        margin-bottom: 6px !important;
        border-left: 24px solid rgb(115, 110, 54);
        background: rgb(75, 53, 25);
        color: #fbf0dc;
        text-align:left;
    }

    p {
        margin-top: 12px !important;
        color:#dcdcdc;
    }

    a {
        color: rgb(57, 156, 107) !important;
        text-decoration: none !important;
        font-weight: 800;
    }
    a:hover { text-decoration: underline; }

    /* Bloques de código: legibilidad, padding y separación */
    pre {
        background: #0f0f0f;
        border: 1px solid #222;
        padding: 16px 14px;
        border-radius: 6px;
        overflow: auto;
        margin: 12px 0;
        line-height: 1.6;
        font-size: 0.95rem;
        tab-size: 4;
        -moz-tab-size: 4;
    }

    /* <code> dentro de pre ocupa el bloque y no añade padding extra */
    pre code {
        display: block;
        background: transparent;
        padding: 0;
        border: none;
        color: #eaeaea;
        white-space: pre; /* preserva saltos exactos */
    }

    /* Para bloques de una sola línea en texto, si usas <code> suelto */
    code.inline {
      background:#111;
      padding:2px 6px;
      border-radius:4px;
      border:1px solid #222;
    }

    /* Listas y tablas */
    ul, ol { margin-left:20px; color:#d9d9d9; }()
    table { border-collapse:collapse; margin:10px 0; color:#ddd; }
    table, th, td { border:1px solid #444; }
    th, td { padding:6px 12px; }

    /* small helpers */
    .note {
      background:#2a2a12;
      border:1px solid #4b4723;
      padding:8px 12px;
      border-radius:6px;
      margin:10px 0;
      color:#bfe5c9;
      width: fit-content;
    }

    .center { text-align:center; }

    .finger { animation: float 0.5s ease-in-out infinite alternate; }
    @keyframes float { from { transform: translateY(0); } to { transform: translateY(20px); } }

    @media (max-width:800px){
      .container { padding:12px; }
      h2 { padding:12px; font-size:20px; margin-top:30px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      Introducción a
      <img src="https://static.djangoproject.com/img/logos/django-logo-negative.1d528e2cb5fb.png"
           width="140"
           style="vertical-align: middle; margin-left: 10px; background-color:rgba(3, 18, 11, 0.36); padding: 6px 6px; border-radius: 14px;">
    </h1>

    <p>Guía de introducción a <a href="https://docs.djangoproject.com/es/5.2/">Django (Python)</a>. Incluye entorno virtual, instalación, estructura del proyecto, apps, rutas, modelos, vistas, templates, migraciones, panel admin, ORM y template tags.</p>

    <div class="center">
      <img class="finger" src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fhotemoji.com%2Fimages%2Femoji%2Fl%2F17zcrtb11cx2zl.png&f=1&nofb=1&ipt=98be3384ba263dd958fd6f0e1e62f492e7fe0b72366391dede7d2d354b3a3cbe" width="60" alt="emoji">
    </div>

    <!-- UNIDAD label -->
    <h2 id="section-1">1. Crear entorno de trabajo</h2>

    <h3><span style="font-weight:900">>> </span> Crear carpeta del proyecto</h3>
    <pre><code class="language-bash">mkdir primerproyecto
cd primerproyecto</code></pre>

    <h3><span style="font-weight:900">>> </span> Crear y activar entorno virtual</h3>
    <pre><code class="language-bash">python3 -m venv env
source env/bin/activate</code></pre>

    <p class="note"><strong>Nota:</strong> para salir del entorno virtual:</p>
    <pre><code class="language-bash">deactivate</code></pre>

    <h2 id="section-2">2. Instalación de Django</h2>

    <h3><span style="font-weight:900">>> </span> Crear archivo <code class="inline">requirements.txt</code></h3>
    <p>Contenido:</p>
    <pre><code class="language-none">Django==5.1.3</code></pre>

    <h3><span style="font-weight:900">>> </span> Instalar dependencias</h3>
    <pre><code class="language-bash">pip install -r requirements.txt</code></pre>

    <h3><span style="font-weight:900">>> </span> Verificar instalación</h3>
    <pre><code class="language-bash">django-admin --version</code></pre>

    <h2 id="section-3">3. Crear proyecto y aplicación</h2>

    <h3><span style="font-weight:900">>> </span> Crear proyecto (IMPORTANTE: el punto al final)</h3>
    <pre><code class="language-bash">django-admin startproject nombre_proyecto .</code></pre>

    <h3><span style="font-weight:900">>> </span> Crear una aplicación</h3>
    <pre><code class="language-bash">python manage.py startapp nombre_aplicacion</code></pre>

    <h2 id="section-4">4. Configuración inicial (<code>settings.py</code>)</h2>
    <p>Ajustar idioma, zona horaria, estáticos y registrar la app:</p>
    <pre><code class="language-python">TIME_ZONE = 'Europe/Madrid'
LANGUAGE_CODE = 'es-es'
ALLOWED_HOSTS = ['127.0.0.1']

STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'static'

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    'nombre_aplicacion',
]</code></pre>

    <h2 id="section-5">5. Configuración de URLs y Vistas</h2>

    <h3><span style="font-weight:900">>> </span> URLs del proyecto</h3>
    <pre><code class="language-python">from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('nombre_app/', include('nombre_app.urls')),
]</code></pre>

    <h3><span style="font-weight:900">>> </span> URLs de la aplicación</h3>
    <pre><code class="language-python">from django.urls import path
from . import views

urlpatterns = [
    path('', views.principal, name='principal'),
    path('&lt;int:pk&gt;', views.detalle_post, name='detalle_post'),
]</code></pre>

    <h2 id="section-6">6. Modelos (<code>models.py</code>)</h2>
    <pre><code class="language-python">from django.db import models

class Post(models.Model):
    titulo = models.CharField(max_length=200)
    autor = models.CharField(max_length=60)
    cuerpo = models.TextField()

    def __str__(self):
        return self.titulo</code></pre>

    <h2 id="section-7">7. Vistas (<code>views.py</code>)</h2>
    <pre><code class="language-python">from django.shortcuts import render, get_object_or_404
from .models import Post

def principal(request):
    posts = Post.objects.all()
    return render(request, 'nombre_app/principal.html', {'posts': posts})

def detalle_post(request, pk):
    post = get_object_or_404(Post, pk=pk)
    return render(request, 'nombre_app/detalle_post.html', {'post': post})</code></pre>

    <h2 id="section-8">8. Templates y static files</h2>

    <h3><span style="font-weight:900">>> </span> Estructura recomendada</h3>
    <pre><code class="language-none">nombre_app/
└── static/
    └── nombre_app/
        ├── css/
        │   └── style.css
        └── js/
            └── main.js

└── templates/
    └── nombre_app/
        ├── base.html
        ├── principal.html
        └── detalle_post.html</code></pre>

    <h3><span style="font-weight:900">>> </span> Template base (<code>base.html</code>)</h3>
    <pre><code class="language-html">&lt;!-- templates/nombre_app/base.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Mi wiki&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'nombre_app/css/style.css' %}&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{% block titulo %}{% endblock %}&lt;/h1&gt;

    {% block contenido %}{% endblock %}

    &lt;script src=&quot;{% static 'nombre_app/js/main.js' %}&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

    <h3><span style="font-weight:900">>> </span> Template heredado (<code>principal.html</code>)</h3>
    <pre><code class="language-html">&lt;!-- templates/nombre_app/principal.html --&gt;
{% extends 'nombre_app/base.html' %}

{% block titulo %}Entradas del blog{% endblock %}

{% block contenido %}
&lt;ul&gt;
    {% for post in posts %}
        &lt;li&gt;
            &lt;a href=&quot;{% url 'detalle_post' pk=post.pk %}&quot;&gt;
                {{ post.titulo }} ({{ post.autor }})
            &lt;/a&gt;
        &lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
{% endblock %}</code></pre>

    <h3><span style="font-weight:900">>> </span> Paso de datos a templates</h3>
    <pre><code class="language-python">def principal(request):
    context = {
        "titulo": "Mi primer post",
        "autor": "JI",
        "cuerpo": "Este es mi primer post"
    }
    return render(request, 'nombre_app/principal.html', context)</code></pre>

    <pre><code class="language-html">&lt;h1&gt;{{ titulo }}&lt;/h1&gt;
&lt;p&gt;Autor: {{ autor }}&lt;/p&gt;
&lt;p&gt;{{ cuerpo }}&lt;/p&gt;</code></pre>

    <h2 id="section-9">9. Migraciones</h2>
    <pre><code class="language-bash">## Crear migraciones para la app
python manage.py makemigrations nombre_app

## Aplicar migraciones
python manage.py migrate nombre_app

## Migrar todo (todas las apps incluyendo admin y más)
python manage.py migrate</code></pre>

    <h2 id="section-10">10. Panel de administración</h2>
    <h3><span style="font-weight:900">>> </span> Registrar modelo</h3>
    <pre><code class="language-python">from django.contrib import admin
from .models import Post

admin.site.register(Post)</code></pre>

    <h3><span style="font-weight:900">>> </span> Crear superusuario</h3>
    <pre><code class="language-bash">python manage.py createsuperuser</code></pre>

    <h2 id="section-11">11. ORM y QuerySets</h2>

    <h3><span style="font-weight:900">>> </span> Acceder a la shell</h3>
    <pre><code class="language-bash">python manage.py shell</code></pre>

    <h4>&gt;&gt; Consultas básicas</h4>
    <pre><code class="language-python">from nombre_app.models import Post

Post.objects.all()
Post.objects.get(id=1)
Post.objects.filter(autor="Patricia")
Post.objects.create(titulo="Hola", autor="A", cuerpo="Texto")
Post.objects.order_by("autor")
Post.objects.order_by("-autor")</code></pre>

    <h4>&gt;&gt; Filtros comunes</h4>
    <pre><code class="language-python">Post.objects.filter(titulo__contains="entrada")
Post.objects.filter(titulo__icontains="entrada")
Post.objects.filter(id__gt=5)
Post.objects.filter(autor__startswith="J")
Post.objects.filter(autor__endswith="z")</code></pre>

    <h2 id="section-12">12. Template Tags y Filtros</h2>

    <h3><span style="font-weight:900">>> </span> Bucle for</h3>
    <pre><code class="language-html">&lt;ul&gt;
{% for post in posts %}
    &lt;li&gt;{{ forloop.counter }}. {{ post.titulo }}&lt;/li&gt;
{% empty %}
    &lt;li&gt;No hay entradas&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;</code></pre>

    <h4>&gt;&gt; Variables útiles</h4>
    <ul>
      <li><code>forloop.counter</code> → nº de iteración (empezando en 1)</li>
      <li><code>forloop.first</code> → True si es la primera vuelta</li>
      <li><code>forloop.last</code> → True si es la última</li>
    </ul>

    <h3><span style="font-weight:900">>> </span> Condicionales</h3>
    <pre><code class="language-html">{% if post.fpublicado %}
    &lt;time&gt;{{ post.fpublicado }}&lt;/time&gt;
{% else %}
    &lt;p&gt;Aún no está publicado&lt;/p&gt;
{% endif %}</code></pre>

    <h3><span style="font-weight:900">>> </span> Filtros útiles</h3>
    <pre><code class="language-python">{{ post.cuerpo|linebreaksbr }}
{{ post.titulo|upper }}
{{ post.titulo|lower }}
{{ valor|default:"N/A" }}</code></pre>

    <h2 id="section-13">13. Comandos útiles de Django</h2>
    <pre><code class="language-bash">python manage.py runserver
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py shell</code></pre>

  </div>

  <!-- Highlight.js: estilos + script -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

</body>
</html>
